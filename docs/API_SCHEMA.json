{
  "api_version": "6.0.0",
  "generated_at": "2025-08-02T12:00:00.000000",
  "base_url": "http://localhost:8000",
  "title": "AgriTech Platform - Complete API Schema",
  "description": "Comprehensive API schema for the AgriTech auction platform with ML recommendations, real-time bidding, and mobile support",
  "cors_enabled": ["localhost:3000", "localhost:3001", "localhost:8080"],
  "rate_limiting": {
    "requests_per_hour": 1000,
    "requests_per_minute": 60
  },
  "authentication": {
    "type": "Bearer JWT",
    "header": "Authorization: Bearer <token>",
    "token_expiry": "24 hours"
  },
  "total_endpoints": 75,
  "endpoints": [
    {
      "method": "POST",
      "path": "/api/v6/auth/register",
      "summary": "User Registration",
      "description": "Register a new user with role-based access (FARMER, TRADER, ADMIN, AUCTIONEER)",
      "tags": ["Authentication"],
      "auth_required": false,
      "required_roles": [],
      "request_schema": {
        "type": "object",
        "required": ["email", "password", "first_name", "last_name", "role", "terms_agreement"],
        "properties": {
          "email": {"type": "string", "format": "email"},
          "password": {"type": "string", "minLength": 8},
          "first_name": {"type": "string", "maxLength": 50},
          "last_name": {"type": "string", "maxLength": 50},
          "role": {"type": "string", "enum": ["FARMER", "TRADER", "ADMIN", "AUCTIONEER"]},
          "terms_agreement": {"type": "boolean"},
          "phone_number": {"type": "string"}
        }
      },
      "response_schema": {
        "201": {
          "status": "success",
          "message": "Registration successful",
          "data": {
            "user": {
              "id": "uuid",
              "email": "string",
              "first_name": "string",
              "last_name": "string",
              "role": "string",
              "is_verified": "boolean"
            }
          }
        }
      },
      "error_codes": [
        {"code": 400, "description": "Validation error or email already exists"},
        {"code": 422, "description": "Invalid input data format"}
      ]
    },
    {
      "method": "POST",
      "path": "/api/v6/auth/login",
      "summary": "User Login",
      "description": "Authenticate user and receive JWT access tokens",
      "tags": ["Authentication"],
      "auth_required": false,
      "required_roles": [],
      "request_schema": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": {"type": "string", "format": "email"},
          "password": {"type": "string"}
        }
      },
      "response_schema": {
        "200": {
          "status": "success",
          "message": "Login successful",
          "data": {
            "access_token": "string",
            "refresh_token": "string",
            "token_type": "bearer",
            "user": {
              "id": "uuid",
              "email": "string",
              "role": "string",
              "is_verified": "boolean"
            }
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Invalid credentials"
        },
        {
          "code": 429,
          "description": "Too many login attempts"
        }
      ],
      "example_request": {
        "email": "farmer@agritech.com",
        "password": "SecurePass123!"
      },
      "example_response": {
        "message": "Login successful",
        "data": {
          "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
          "token_type": "bearer",
          "user": {
            "id": "123e4567-e89b-12d3-a456-426614174000",
            "email": "farmer@agritech.com",
            "role": "farmer",
            "is_verified": true
          }
        }
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/auth/reset-password",
      "summary": "Password Reset Request",
      "description": "Request password reset via email",
      "tags": [
        "Authentication"
      ],
      "auth_required": false,
      "required_roles": [],
      "request_schema": {
        "type": "object",
        "required": [
          "email"
        ],
        "properties": {
          "email": {
            "type": "string",
            "format": "email"
          }
        }
      },
      "response_schema": {
        "200": {
          "message": "Password reset email sent",
          "data": {
            "email_sent": true
          }
        }
      },
      "error_codes": [
        {
          "code": 404,
          "description": "Email not found"
        }
      ],
      "example_request": {
        "email": "farmer@agritech.com"
      },
      "example_response": {
        "message": "Password reset email sent",
        "data": {
          "email_sent": true
        }
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/commodities/",
      "summary": "Create Commodity Listing",
      "description": "Create a new commodity listing for auction",
      "tags": [
        "Commodities"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "commodity_name",
          "quantity_kg",
          "harvest_date",
          "min_price"
        ],
        "properties": {
          "commodity_name": {
            "type": "string",
            "maxLength": 100
          },
          "description": {
            "type": "string",
            "maxLength": 500
          },
          "quantity_kg": {
            "type": "number",
            "minimum": 0.1
          },
          "harvest_date": {
            "type": "string",
            "format": "date"
          },
          "min_price": {
            "type": "number",
            "minimum": 0.01
          },
          "closing_date": {
            "type": "string",
            "format": "date-time"
          },
          "category_id": {
            "type": "string",
            "format": "uuid"
          },
          "image_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "response_schema": {
        "201": {
          "message": "Commodity created successfully",
          "data": {
            "id": "uuid",
            "commodity_name": "string",
            "description": "string",
            "quantity_kg": "number",
            "min_price": "number",
            "current_price": "number",
            "status": "string",
            "seller_id": "uuid",
            "created_at": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Validation error"
        },
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 403,
          "description": "Farmer role required"
        }
      ],
      "example_request": {
        "commodity_name": "Premium Basmati Rice",
        "description": "High-quality aged basmati rice from Punjab",
        "quantity_kg": 1000.0,
        "harvest_date": "2025-01-15",
        "min_price": 45.5,
        "closing_date": "2025-08-01T12:00:00Z"
      },
      "example_response": {
        "message": "Commodity created successfully",
        "data": {
          "id": "987fcdeb-51a2-43d7-b456-426614174000",
          "commodity_name": "Premium Basmati Rice",
          "description": "High-quality aged basmati rice from Punjab",
          "quantity_kg": 1000.0,
          "min_price": 45.5,
          "current_price": 45.5,
          "status": "active",
          "seller_id": "123e4567-e89b-12d3-a456-426614174000",
          "created_at": "2025-07-20T10:30:00Z"
        }
      }
    },
    {
      "method": "GET",
      "path": "/api/v1/commodities/",
      "summary": "Get All Commodities",
      "description": "Retrieve all active commodity listings with pagination",
      "tags": [
        "Commodities"
      ],
      "auth_required": false,
      "required_roles": [],
      "request_schema": null,
      "response_schema": {
        "200": {
          "message": "Commodities retrieved successfully",
          "data": [
            {
              "id": "uuid",
              "commodity_name": "string",
              "description": "string",
              "quantity_kg": "number",
              "min_price": "number",
              "current_price": "number",
              "status": "string",
              "seller": {
                "id": "uuid",
                "first_name": "string",
                "last_name": "string"
              },
              "bids_count": "number",
              "closing_date": "datetime"
            }
          ],
          "pagination": {
            "page": "number",
            "per_page": "number",
            "total": "number",
            "pages": "number"
          }
        }
      },
      "error_codes": [],
      "example_request": null,
      "example_response": {
        "message": "Commodities retrieved successfully",
        "data": [
          {
            "id": "987fcdeb-51a2-43d7-b456-426614174000",
            "commodity_name": "Premium Basmati Rice",
            "description": "High-quality aged basmati rice",
            "quantity_kg": 1000.0,
            "min_price": 45.5,
            "current_price": 48.75,
            "status": "active",
            "seller": {
              "id": "123e4567-e89b-12d3-a456-426614174000",
              "first_name": "John",
              "last_name": "Farmer"
            },
            "bids_count": 5,
            "closing_date": "2025-08-01T12:00:00Z"
          }
        ]
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/bidding/place-bid",
      "summary": "Place Bid",
      "description": "Place a bid on a commodity listing",
      "tags": [
        "Bidding"
      ],
      "auth_required": true,
      "required_roles": [
        "trader"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "commodity_listing_id",
          "amount"
        ],
        "properties": {
          "commodity_listing_id": {
            "type": "string",
            "format": "uuid"
          },
          "amount": {
            "type": "number",
            "minimum": 0.01
          }
        }
      },
      "response_schema": {
        "201": {
          "message": "Bid placed successfully",
          "data": {
            "id": "uuid",
            "commodity_listing_id": "uuid",
            "bidder_id": "uuid",
            "amount": "number",
            "status": "string",
            "created_at": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Bid amount too low or invalid"
        },
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 403,
          "description": "Trader role required or KYC not verified"
        },
        {
          "code": 404,
          "description": "Commodity not found"
        }
      ],
      "example_request": {
        "commodity_listing_id": "987fcdeb-51a2-43d7-b456-426614174000",
        "amount": 50.0
      },
      "example_response": {
        "message": "Bid placed successfully",
        "data": {
          "id": "456e7890-f12c-34e5-d678-901234567890",
          "commodity_listing_id": "987fcdeb-51a2-43d7-b456-426614174000",
          "bidder_id": "789abc12-3456-78de-f012-345678901234",
          "amount": 50.0,
          "status": "active",
          "created_at": "2025-07-20T14:30:00Z"
        }
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/price-tracking/alerts",
      "summary": "Create Price Alert",
      "description": "Set up price alert notification for a commodity",
      "tags": [
        "Price Tracking"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "commodity_id",
          "threshold_price",
          "direction"
        ],
        "properties": {
          "commodity_id": {
            "type": "string",
            "format": "uuid"
          },
          "threshold_price": {
            "type": "number",
            "minimum": 0.01
          },
          "direction": {
            "type": "string",
            "enum": [
              "ABOVE",
              "BELOW"
            ]
          },
          "notify_email": {
            "type": "boolean",
            "default": true
          },
          "notify_sms": {
            "type": "boolean",
            "default": false
          },
          "notify_onsite": {
            "type": "boolean",
            "default": true
          }
        }
      },
      "response_schema": {
        "201": {
          "message": "Price alert created successfully",
          "data": {
            "id": "uuid",
            "commodity_id": "uuid",
            "user_id": "uuid",
            "threshold_price": "number",
            "direction": "string",
            "active": "boolean",
            "created_at": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Invalid alert parameters"
        },
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 404,
          "description": "Commodity not found"
        }
      ],
      "example_request": {
        "commodity_id": "987fcdeb-51a2-43d7-b456-426614174000",
        "threshold_price": 45.0,
        "direction": "BELOW",
        "notify_email": true,
        "notify_sms": true
      },
      "example_response": {
        "message": "Price alert created successfully",
        "data": {
          "id": "alert123-4567-89ab-cdef-012345678901",
          "commodity_id": "987fcdeb-51a2-43d7-b456-426614174000",
          "user_id": "789abc12-3456-78de-f012-345678901234",
          "threshold_price": 45.0,
          "direction": "BELOW",
          "active": true,
          "created_at": "2025-07-20T15:00:00Z"
        }
      }
    },
    {
      "method": "GET",
      "path": "/api/v6/recommendations/suggestions/{commodity_slug}",
      "summary": "Get ML Trading Recommendation",
      "description": "Get AI-powered trading recommendation for a specific commodity",
      "tags": [
        "ML Recommendations"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": null,
      "response_schema": {
        "200": {
          "message": "Recommendation generated successfully",
          "data": {
            "commodity_slug": "string",
            "suggestion": "string (BUY/SELL/HOLD)",
            "confidence": "number (0-1)",
            "current_price": "number",
            "predicted_price": "number",
            "avg_price_30d": "number",
            "avg_price_7d": "number",
            "volatility": "number",
            "weekly_trend": "number",
            "monthly_trend": "number",
            "reasoning": "string",
            "risk_level": "string",
            "timestamp": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Insufficient data for prediction"
        },
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 404,
          "description": "Commodity not found"
        }
      ],
      "example_request": null,
      "example_response": {
        "message": "Recommendation generated successfully",
        "data": {
          "commodity_slug": "premium-basmati-rice",
          "suggestion": "BUY",
          "confidence": 0.85,
          "current_price": 48.75,
          "predicted_price": 52.3,
          "avg_price_30d": 46.2,
          "avg_price_7d": 48.1,
          "volatility": 0.12,
          "weekly_trend": 0.025,
          "monthly_trend": 0.055,
          "reasoning": "Price trending upward with strong demand indicators",
          "risk_level": "medium",
          "timestamp": "2025-07-20T16:00:00Z"
        }
      }
    },
    {
      "method": "GET",
      "path": "/api/v6/recommendations/market-overview",
      "summary": "Get Market Overview",
      "description": "Get AI-powered market sentiment and trading opportunities",
      "tags": [
        "ML Recommendations"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": null,
      "response_schema": {
        "200": {
          "message": "Market overview generated successfully",
          "data": {
            "market_sentiment": {
              "buy_percentage": "number",
              "sell_percentage": "number",
              "hold_percentage": "number"
            },
            "top_buy_opportunities": [
              {
                "commodity_slug": "string",
                "suggestion": "BUY",
                "confidence": "number",
                "current_price": "number",
                "reasoning": "string"
              }
            ],
            "top_sell_opportunities": [
              {
                "commodity_slug": "string",
                "suggestion": "SELL",
                "confidence": "number",
                "current_price": "number",
                "reasoning": "string"
              }
            ],
            "total_analyzed": "number",
            "timestamp": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 401,
          "description": "Authentication required"
        }
      ],
      "example_request": null,
      "example_response": {
        "message": "Market overview generated successfully",
        "data": {
          "market_sentiment": {
            "buy_percentage": 65.0,
            "sell_percentage": 20.0,
            "hold_percentage": 15.0
          },
          "top_buy_opportunities": [
            {
              "commodity_slug": "wheat-premium",
              "suggestion": "BUY",
              "confidence": 0.92,
              "current_price": 28.5,
              "reasoning": "Strong seasonal demand expected"
            }
          ],
          "total_analyzed": 45,
          "timestamp": "2025-07-20T16:00:00Z"
        }
      }
    },
    {
      "method": "PATCH",
      "path": "/api/v1/auth/verify-kyc/{user_id}",
      "summary": "Verify User KYC",
      "description": "Admin endpoint to verify user's KYC status",
      "tags": [
        "Admin"
      ],
      "auth_required": true,
      "required_roles": [
        "admin"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "is_verified"
        ],
        "properties": {
          "is_verified": {
            "type": "boolean"
          },
          "verification_notes": {
            "type": "string"
          }
        }
      },
      "response_schema": {
        "200": {
          "message": "KYC verification updated successfully",
          "data": {
            "user_id": "uuid",
            "is_verified": "boolean",
            "verified_at": "datetime",
            "verified_by": "uuid"
          }
        }
      },
      "error_codes": [
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 403,
          "description": "Admin role required"
        },
        {
          "code": 404,
          "description": "User not found"
        }
      ],
      "example_request": {
        "is_verified": true,
        "verification_notes": "All documents verified successfully"
      },
      "example_response": {
        "message": "KYC verification updated successfully",
        "data": {
          "user_id": "123e4567-e89b-12d3-a456-426614174000",
          "is_verified": true,
          "verified_at": "2025-07-20T16:30:00Z",
          "verified_by": "admin456-7890-abcd-ef12-345678901234"
        }
      }
    },
    {
      "method": "GET",
      "path": "/api/v1/general/health",
      "summary": "Health Check",
      "description": "Check API health status",
      "tags": [
        "General"
      ],
      "auth_required": false,
      "required_roles": [],
      "request_schema": null,
      "response_schema": {
        "200": {
          "message": "AgriTech API is healthy",
          "data": {
            "status": "healthy",
            "timestamp": "datetime",
            "version": "string",
            "services": {
              "database": "string",
              "redis": "string",
              "ml_engine": "string"
            }
          }
        }
      },
      "error_codes": [],
      "example_request": null,
      "example_response": {
        "message": "AgriTech API is healthy",
        "data": {
          "status": "healthy",
          "timestamp": "2025-07-20T17:00:00Z",
          "version": "6.0.0",
          "services": {
            "database": "connected",
            "redis": "connected",
            "ml_engine": "active"
          }
        }
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/general/upload-image",
      "summary": "Upload Image",
      "description": "Upload image file for profile or product listing",
      "tags": [
        "General"
      ],
      "auth_required": false,
      "required_roles": [],
      "request_schema": {
        "type": "object",
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "description": "Image file (JPEG, PNG, WEBP, max 5MB)"
          }
        }
      },
      "response_schema": {
        "200": {
          "message": "Image uploaded successfully",
          "data": {
            "file_id": "uuid",
            "filename": "string",
            "content_type": "string",
            "size": "number"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Invalid file type or size"
        },
        {
          "code": 413,
          "description": "File too large"
        }
      ],
      "example_request": null,
      "example_response": {
        "message": "Image uploaded successfully",
        "data": {
          "file_id": "img12345-6789-abcd-ef01-234567890123",
          "filename": "product_image.jpg",
          "content_type": "image/jpeg",
          "size": 245760
        }
      }
    },
    {
      "method": "POST",
      "path": "/api/v1/auctioneer/",
      "summary": "Create General Listing",
      "description": "Create a general auction listing (non-commodity)",
      "tags": [
        "Auctioneer"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "name",
          "desc",
          "price",
          "closing_date",
          "file_type",
          "image_id"
        ],
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 100
          },
          "desc": {
            "type": "string",
            "maxLength": 500
          },
          "category": {
            "type": "string"
          },
          "price": {
            "type": "number",
            "minimum": 0.01
          },
          "closing_date": {
            "type": "string",
            "format": "date-time"
          },
          "file_type": {
            "type": "string"
          },
          "image_id": {
            "type": "string",
            "format": "uuid"
          }
        }
      },
      "response_schema": {
        "201": {
          "message": "Listing created successfully",
          "data": {
            "id": "uuid",
            "name": "string",
            "desc": "string",
            "price": "number",
            "status": "string",
            "seller_id": "uuid",
            "created_at": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Validation error"
        },
        {
          "code": 401,
          "description": "Authentication required"
        }
      ],
      "example_request": {
        "name": "Agricultural Equipment",
        "desc": "High-quality tractor for sale",
        "category": "Equipment",
        "price": 250000.0,
        "closing_date": "2025-08-15T18:00:00Z",
        "file_type": "equipment",
        "image_id": "img12345-6789-abcd-ef01-234567890123"
      },
      "example_response": {
        "message": "Listing created successfully",
        "data": {
          "id": "listing1-2345-6789-abcd-ef0123456789",
          "name": "Agricultural Equipment",
          "desc": "High-quality tractor for sale",
          "price": 250000.0,
          "status": "active",
          "seller_id": "123e4567-e89b-12d3-a456-426614174000",
          "created_at": "2025-07-20T18:00:00Z"
        }
      }
    },
    {
      "method": "WebSocket",
      "path": "/ws/bidding/{commodity_id}",
      "summary": "Real-time Bidding Updates",
      "description": "WebSocket connection for real-time bidding updates",
      "tags": [
        "WebSocket"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string",
            "enum": [
              "subscribe",
              "unsubscribe",
              "bid"
            ]
          },
          "data": {
            "type": "object"
          }
        }
      },
      "response_schema": {
        "message": {
          "type": "string",
          "event": "string",
          "data": {
            "commodity_id": "uuid",
            "new_bid": {
              "id": "uuid",
              "amount": "number",
              "bidder": "string",
              "timestamp": "datetime"
            }
          }
        }
      },
      "error_codes": [
        {
          "code": 401,
          "description": "Authentication required"
        },
        {
          "code": 404,
          "description": "Commodity not found"
        }
      ],
      "example_request": {
        "action": "subscribe",
        "data": {
          "commodity_id": "987fcdeb-51a2-43d7-b456-426614174000"
        }
      },
      "example_response": {
        "type": "bid_update",
        "event": "new_bid",
        "data": {
          "commodity_id": "987fcdeb-51a2-43d7-b456-426614174000",
          "new_bid": {
            "id": "bid12345-6789-abcd-ef01-234567890123",
            "amount": 52.0,
            "bidder": "Trader John",
            "timestamp": "2025-07-20T18:30:00Z"
          }
        }
      }
    },
    {
      "method": "POST",
      "path": "/mobile/register-device",
      "summary": "Register Mobile Device",
      "description": "Register mobile device for push notifications",
      "tags": [
        "Mobile"
      ],
      "auth_required": true,
      "required_roles": [
        "farmer",
        "trader"
      ],
      "request_schema": {
        "type": "object",
        "required": [
          "device_token",
          "device_type",
          "app_version"
        ],
        "properties": {
          "device_token": {
            "type": "string"
          },
          "device_type": {
            "type": "string",
            "enum": [
              "ios",
              "android"
            ]
          },
          "app_version": {
            "type": "string"
          },
          "device_name": {
            "type": "string"
          }
        }
      },
      "response_schema": {
        "201": {
          "message": "Device registered successfully",
          "data": {
            "device_id": "uuid",
            "device_token": "string",
            "device_type": "string",
            "registered_at": "datetime"
          }
        }
      },
      "error_codes": [
        {
          "code": 400,
          "description": "Invalid device data"
        },
        {
          "code": 401,
          "description": "Authentication required"
        }
      ],
      "example_request": {
        "device_token": "dGVzdF9kZXZpY2VfdG9rZW4=",
        "device_type": "android",
        "app_version": "1.0.0",
        "device_name": "Samsung Galaxy S21"
      },
      "example_response": {
        "message": "Device registered successfully",
        "data": {
          "device_id": "device12-3456-7890-abcd-ef0123456789",
          "device_token": "dGVzdF9kZXZpY2VfdG9rZW4=",
          "device_type": "android",
          "registered_at": "2025-07-20T19:00:00Z"
        }
      }
    }
  ]
}